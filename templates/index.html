<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>PixelBot â€” Dashboard</title>

<style>
body {
    font-family: Inter, Arial, sans-serif;
    background: #f5f6f8;
    margin: 0;
}

.navbar {
    background: white;
    padding: 16px;
    font-weight: 600;
    border-bottom: 1px solid #ddd;
}

.container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
}

.chat-item {
    background: white;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.status {
    font-size: 13px;
}
</style>
</head>

<body>

<div class="navbar">PixelBot â€” Dashboard</div>

<div class="container">
    <h2>Chats recientes</h2>
    <div id="chat-list"></div>
</div>

<script>
async function refreshChats() {
    const res = await fetch("/api/recent_chats");
    const data = await res.json();
    const list = document.getElementById("chat-list");
    list.innerHTML = "";

    if (!data.chats) return;

    data.chats.forEach(c => {
    const div = document.createElement("div");
    div.className = "chat-item";

    const status = c.handoff
        ? "ðŸ”´ Persona"
        : "ðŸŸ¢ Bot";

    div.innerHTML = `
        <a href="/chat/${c.wa_id}">ðŸ“± ${c.name || c.wa_id}</a>
        <span>${status}</span>
    `;

    list.appendChild(div);
});
}

setInterval(refreshChats, 2000);
refreshChats();
</script>

</body>
</html>

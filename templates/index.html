<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>PixelBot â€” Dashboard</title>

<style>
body {
    font-family: Inter, Arial, sans-serif;
    background: #f5f6f8;
}

.navbar {
    background: white;
    padding: 16px;
    font-weight: 600;
    border-bottom: 1px solid #ddd;
}

.container {
    max-width: 800px;
    margin: auto;
    padding: 20px;
}

.chat-item {
    background: white;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
}
</style>
</head>

<body>

<div class="navbar">PixelBot â€” Dashboard</div>

<div class="container">
    <h2>Chats recientes</h2>
    <div id="chat-list"></div>
</div>

<script>
async function refreshChats() {
    const res = await fetch("/api/recent_chats");
    const data = await res.json();
    const list = document.getElementById("chat-list");
    list.innerHTML = "";

    if (!data.chats) return;

    data.chats.forEach(c => {
        const div = document.createElement("div");
        div.className = "chat-item";
        div.innerHTML = `
            <a href="/chat/${c.wa_id}">ðŸ“± ${c.name}</a>
            <span>${c.timestamp}</span>
        `;
        list.appendChild(div);
    });
}

setInterval(refreshChats, 2000);
refreshChats();
</script>

</body>
</html>
